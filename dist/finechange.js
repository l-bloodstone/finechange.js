(()=>{var o=class{constructor(t,s){this.exchangeRates=t,this.xamount=s}__generateNewExchangeRate(t,s){let e={};for(let r in s)r!==t&&(e[r]=s[r]/s[t]);return e[t]=1,e}exchange(t){let s=0;if(this.exchangeRates.hasOwnProperty(t)&&(s=this.exchangeRates[t]),s<0||s===0)throw Error("[ERROR] Exchange rate can not be negative or zero");let e=parseInt(this.xamount.amount*s);return new u().fromCents(e).initExchanger(this.__generateNewExchangeRate(t,this.exchangeRates))}};var l={symbol:"$",separator:" ",decimal:"."},a=class{constructor(t,s){if(this.xamountFloat=t.toString(),this.dollar=t.dollar,this.cents=this.xamountFloat.split(".")[1],this.amount=t.amount,s){this.options=s;for(let e in l)s.hasOwnProperty(e)||(s[e]=l[e])}else this.options=l;this.formatString=`${this.options.symbol}${this.__formatDollar()}${this.options.decimal}${this.cents}`}__abs(t){return t<0?-t:t}__formatDollar(){let t="",s=this.__abs(this.dollar).toString();if(s.length<=3)return s;let e=0;for(let r=s.length-1;r>=0;r--)e%3===0&&e!==0?t=s[r]+this.options.separator+t:t=s[r]+t,e++;return t}format(){return this.amount<0&&(this.formatString="-"+this.formatString),this.formatString}};var h=class{constructor(t=0){if(this.__sanityCheck(t),typeof t=="string"){let{dollar:s,cents:e,amount:r}=this.parse(t);this.dollar=s,this.cents=e,this.amount=r}else this.dollar=parseInt(t),this.cents=parseInt(t*100)%100,this.amount=t*100;this.discounted=!1,this.exchanger={}}fromCents(t){return this.dollar=parseInt(t/100),this.cents=parseInt(t%100),this.amount=t,this}__sanityCheck(t){if(!Number(t)===t&&typeof t!="string")throw Error("Parameters should be Integers or a string")}initExchanger(t){return this.exchanger=new o(t,this),this}exchange(t){return this.exchanger.exchange(t)}__updateCurrentAmount(t){this.dollar=parseInt(t/100),this.cents=parseInt(t%100),this.amount=t}getAmount(){return this.dollar+this.cents/100}getAmountInCents(){return this.amount}toString(){return this.getAmount().toFixed(2)}format(t){return new a(this,t).format()}add(t=0){this.__sanityCheck(t);let s=0;return typeof t=="string"?s=this.parse(t).amount:s=parseInt(t*100),this.__updateCurrentAmount(this.amount+s),this}sub(t=0){this.__sanityCheck(t);let s=0;return typeof t=="string"?s=this.parse(t).amount:s=parseInt(t*100),this.__updateCurrentAmount(this.amount-s),this}mul(t=0){this.__sanityCheck(t);let s=0;return typeof t=="string"?s=this.parse(t).amount:s=parseInt(t*100),s=this.amount*s,this.dollar=parseInt(s/1e4),this.cents=parseInt(s%1e4/100),this.amount=this.dollar*100+this.cents,this}div(t=0){this.__sanityCheck(t);let s=0;if(typeof t=="string"?t=this.parse(t).amount:s=parseInt(t*100),s===0)throw Error("Can't divide by 'zero'");return s=this.amount/s,this.dollar=parseInt(s),this.cents=Math.round(s*100%100),this.amount=this.dollar*100+this.cents,this}applyDiscount(t){let s=this.amount-Math.round(this.amount*t/100);return this.__updateCurrentAmount(s),this.discounted=!0,this.getAmount()}getDiscount(t){return(this.amount-Math.round(this.amount*t/100))/100}parse(t){let s=/(-)?.?(-)?(\d*)\.?(\d{0,2})/,[,e,r,n,i]=s.exec(t);if(n===""&&i==="")throw Error("[ERROR] Invalid string format. Acceptable: ('$20.50', '-$20.50, '20.50', '-20.50')");i.length!==2&&(i+="0"),n=Number(n),i=Number(i),(r==="-"||e==="-")&&(i=-i,n=-n);let f=n*100+i;return{dollar:n,cents:i,amount:f}}};var u=h;})();
